Picked up JAVA_TOOL_OPTIONS: -javaagent:"/opt/java/lib/dd-java-agent.jar"
[dd.trace 2021-03-19 19:21:58:104 +0000] [main] INFO datadog.trace.agent.common.writer.WriterFactory - Detected serverless environment.  Using PrintingWriter
[dd.trace 2021-03-19 19:21:58:180 +0000] [main] INFO datadog.trace.agent.core.StatusLogger - DATADOG TRACER CONFIGURATION {"version":"0.74.0~9fcc12d26","os_name":"Linux","os_version":"4.14.214-164.339.amzn2.x86_64","architecture":"amd64","lang":"jvm","lang_version":"1.8.0_275","jvm_vendor":"Amazon.com Inc.","jvm_version":"25.275-b01","java_class_version":"52.0","http_nonProxyHosts":"null","http_proxyHost":"null","enabled":true,"service":"lambdainternal.AWSLambda","agent_url":"http://localhost:8126","agent_error":true,"debug":false,"analytics_enabled":false,"sampling_rules":[{},{}],"priority_sampling_enabled":true,"logs_correlation_enabled":true,"profiling_enabled":false,"dd_version":"0.74.0~9fcc12d26","health_checks_enabled":true,"configuration_file":"no config file present","runtime_id":"248f4371-c7b2-4dd3-8923-0d6a98b1954b","logging_settings":{"levelInBrackets":false,"dateTimeFormat":"'[dd.trace 'yyyy-MM-dd HH:mm:ss:SSS Z']'","logFile":"System.err","configurationFile":"simplelogger.properties","showShortLogName":false,"showDateTime":true,"showLogName":true,"showThreadName":true,"defaultLogLevel":"INFO","warnLevelString":"WARN","embedException":false}}
START RequestId: XXXX Version: $LATEST
{"m":"aws.lambda.enhanced.invocations","v":1.0,"t":["memorysize:1024","account_id:XXXX","resource:Java-integration-test-dev-helloApiGateway_Java8","functionname:Java-integration-test-dev-helloApiGateway_Java8","runtime:java1.8.0_275","region:sa-east-1","datadog_lambda:0.2.2","cold_start:true"],"e":1616181721}
2021-03-19 19:22:01 <c6ad267a-968e-4618-bacd-41996e1fa2eb> INFO  com.serverless.Handler:20 - received: {resource: /{proxy+},path: /test/hello,httpMethod: GET,headers: {Accept=text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8, Accept-Encoding=gzip, deflate, lzma, sdch, br, Accept-Language=en-US,en;q=0.8, CloudFront-Forwarded-Proto=https, CloudFront-Is-Desktop-Viewer=true, CloudFront-Is-Mobile-Viewer=false, CloudFront-Is-SmartTV-Viewer=false, CloudFront-Is-Tablet-Viewer=false, CloudFront-Viewer-Country=US, Host=wt6mne2s9k.execute-api.us-west-2.amazonaws.com, Upgrade-Insecure-Requests=1, User-Agent=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.82 Safari/537.36 OPR/39.0.2256.48, Via=1.1 fb7cca60f0ecd82ce07790c9c5eef16c.cloudfront.net (CloudFront), X-Amz-Cf-Id=nBsWBOrSHMgnaROZJK1wGCZ9PcRcSpq_oSXZNQwQ10OTZL4cimZo3g==, X-Forwarded-For=192.168.100.1, 192.168.1.1, X-Forwarded-Port=443, X-Forwarded-Proto=https},queryStringParameters: {name=me},pathParameters: {proxy=hello},stageVariables: {stageVarName=stageVarValue},requestContext: {accountId: 123456789012,resourceId: us4z18,stage: test,requestId: 41b45ea3-70b5-11e6-b7bd-69b5aaebc7d9,identity: {cognitoIdentityPoolId: ,accountId: ,cognitoIdentityId: ,caller: ,apiKey: ,sourceIp: 192.168.100.1,eventTriggerConfigId: ,cognitoAuthenticationProvider: ,userArn: ,userAgent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.82 Safari/537.36 OPR/39.0.2256.48,user: ,},resourcePath: /{proxy+},httpMethod: GET,apiId: wt6mne2s9k,},}
END RequestId: XXXX
REPORT RequestId: XXXX	Duration: XXXX ms	Billed Duration: XXXX ms	Memory Size: 1024 MB	Max Memory Used: XXXX MB	Init Duration: XXXX ms	
{"traces":[[{"service":"aws.lambda","name":"aws.lambda","resource":"Java-integration-test-dev-helloApiGateway_Java8","trace_id":"5baae50f307cda09","span_id":"248fbea4946fe858","parent_id":"0","start":1616181721509122591,"duration":55592476,"error":0,"metrics":{"_dd.agent_psr":1.0},"meta":{"function_arn":"arn:aws:lambda:sa-east-1:601427279990:function:java-integration-test-dev-helloapigateway_java8","runtime-id":"248f4371-c7b2-4dd3-8923-0d6a98b1954b","language":"jvm","thread.name":"main","request_id":"c6ad267a-968e-4618-bacd-41996e1fa2eb","datadog_lambda":"0.2.2","thread.id":"1","cold_start":"true","resource_names":"Java-integration-test-dev-helloApiGateway_Java8","function_version":"$LATEST"}}]]}START RequestId: XXXX Version: $LATEST
{"m":"aws.lambda.enhanced.invocations","v":1.0,"t":["memorysize:1024","account_id:XXXX","resource:Java-integration-test-dev-helloApiGateway_Java8","functionname:Java-integration-test-dev-helloApiGateway_Java8","runtime:java1.8.0_275","region:sa-east-1","datadog_lambda:0.2.2","cold_start:false"],"e":1616181724}
java.lang.NullPointerException: java.lang.NullPointerException
java.lang.NullPointerException
	at io.opentracing.propagation.TextMapExtractAdapter.iterator(TextMapExtractAdapter.java:38)
	at datadog.trace.bootstrap.instrumentation.api.ContextVisitors$EntrySetContextVisitor.forEachKey(ContextVisitors.java:55)
	at datadog.trace.bootstrap.instrumentation.api.ContextVisitors$EntrySetContextVisitor.forEachKey(ContextVisitors.java:49)
	at datadog.trace.agent.core.propagation.TagContextExtractor.extract(TagContextExtractor.java:27)
	at datadog.trace.agent.core.propagation.HttpCodec$CompoundExtractor.extract(HttpCodec.java:97)
	at datadog.trace.agent.core.CoreTracer.extract(CoreTracer.java:405)
	at datadog.trace.instrumentation.opentracing32.OTTracer.extract(OTTracer.java:68)
	at io.opentracing.util.GlobalTracer.extract(GlobalTracer.java:204)
	at com.datadoghq.datadog_lambda_java.DDLambda.startSpan(DDLambda.java:140)
	at com.datadoghq.datadog_lambda_java.DDLambda.<init>(DDLambda.java:84)
	at com.serverless.ApiGatewayHandler.handleRequest(ApiGatewayHandler.java:19)
	at com.serverless.ApiGatewayHandler.handleRequest(ApiGatewayHandler.java:13)
END RequestId: XXXX
REPORT RequestId: XXXX	Duration: XXXX ms	Billed Duration: XXXX ms	Memory Size: 1024 MB	Max Memory Used: XXXX MB	
{"traces":[[{"service":"lambdainternal.AWSLambda","name":"http.request","resource":"POST /?/runtime/invocation/?/error","trace_id":"7db8fc80c1d13eb8","span_id":"4a7d26a3cee5ea4b","parent_id":"0","start":1616181725003045588,"duration":80797391,"type":"http","error":0,"metrics":{"_dd.agent_psr":1.0},"meta":{"http.status_code":"202","component":"http-url-connection","span.kind":"client","http.url":"http://127.0.0.1:9001/2018-06-01/runtime/invocation/b3c86b10-4b81-42a0-afa8-be57dc6df030/error","runtime-id":"248f4371-c7b2-4dd3-8923-0d6a98b1954b","language":"jvm","peer.hostname":"127.0.0.1","peer.port":"9001","thread.name":"main","http.method":"POST","thread.id":"1"}}]]}START RequestId: XXXX Version: $LATEST
{"m":"aws.lambda.enhanced.invocations","v":1.0,"t":["memorysize:1024","account_id:XXXX","resource:Java-integration-test-dev-helloApiGateway_Java8","functionname:Java-integration-test-dev-helloApiGateway_Java8","runtime:java1.8.0_275","region:sa-east-1","datadog_lambda:0.2.2","cold_start:false"],"e":1616181727}
java.lang.NullPointerException: java.lang.NullPointerException
java.lang.NullPointerException
	at io.opentracing.propagation.TextMapExtractAdapter.iterator(TextMapExtractAdapter.java:38)
	at datadog.trace.bootstrap.instrumentation.api.ContextVisitors$EntrySetContextVisitor.forEachKey(ContextVisitors.java:55)
	at datadog.trace.bootstrap.instrumentation.api.ContextVisitors$EntrySetContextVisitor.forEachKey(ContextVisitors.java:49)
	at datadog.trace.agent.core.propagation.TagContextExtractor.extract(TagContextExtractor.java:27)
	at datadog.trace.agent.core.propagation.HttpCodec$CompoundExtractor.extract(HttpCodec.java:97)
	at datadog.trace.agent.core.CoreTracer.extract(CoreTracer.java:405)
	at datadog.trace.instrumentation.opentracing32.OTTracer.extract(OTTracer.java:68)
	at io.opentracing.util.GlobalTracer.extract(GlobalTracer.java:204)
	at com.datadoghq.datadog_lambda_java.DDLambda.startSpan(DDLambda.java:140)
	at com.datadoghq.datadog_lambda_java.DDLambda.<init>(DDLambda.java:84)
	at com.serverless.ApiGatewayHandler.handleRequest(ApiGatewayHandler.java:19)
	at com.serverless.ApiGatewayHandler.handleRequest(ApiGatewayHandler.java:13)
END RequestId: XXXX
REPORT RequestId: XXXX	Duration: XXXX ms	Billed Duration: XXXX ms	Memory Size: 1024 MB	Max Memory Used: XXXX MB	
{"traces":[[{"service":"lambdainternal.AWSLambda","name":"http.request","resource":"POST /?/runtime/invocation/?/error","trace_id":"72cd92812c314d8e","span_id":"57b5b57a5db93b08","parent_id":"0","start":1616181727164049796,"duration":18916788,"type":"http","error":0,"metrics":{"_dd.agent_psr":1.0},"meta":{"http.status_code":"202","component":"http-url-connection","span.kind":"client","http.url":"http://127.0.0.1:9001/2018-06-01/runtime/invocation/c52c5496-8efc-4a7a-b260-bb5693c01971/error","runtime-id":"248f4371-c7b2-4dd3-8923-0d6a98b1954b","language":"jvm","peer.hostname":"127.0.0.1","peer.port":"9001","thread.name":"main","http.method":"POST","thread.id":"1"}}]]}
