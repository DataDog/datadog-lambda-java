Picked up JAVA_TOOL_OPTIONS: -javaagent:"/opt/java/lib/dd-java-agent.jar"
OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
[dd.trace 2021-03-19 19:22:42:748 +0000] [main] INFO datadog.trace.agent.common.writer.WriterFactory - Detected serverless environment.  Using PrintingWriter
[dd.trace 2021-03-19 19:22:42:845 +0000] [main] INFO datadog.trace.agent.core.StatusLogger - DATADOG TRACER CONFIGURATION {"version":"0.74.0~9fcc12d26","os_name":"Linux","os_version":"4.14.214-164.339.amzn2.x86_64","architecture":"amd64","lang":"jvm","lang_version":"11.0.9.1","jvm_vendor":"Amazon.com Inc.","jvm_version":"11.0.9.1+12-LTS","java_class_version":"55.0","http_nonProxyHosts":"null","http_proxyHost":"null","enabled":true,"service":"lambdainternal.AWSLambda","agent_url":"http://localhost:8126","agent_error":true,"debug":false,"analytics_enabled":false,"sampling_rules":[{},{}],"priority_sampling_enabled":true,"logs_correlation_enabled":true,"profiling_enabled":false,"dd_version":"0.74.0~9fcc12d26","health_checks_enabled":true,"configuration_file":"no config file present","runtime_id":"f1b14429-6c97-4704-a0b8-8a255d05dd22","logging_settings":{"levelInBrackets":false,"dateTimeFormat":"'[dd.trace 'yyyy-MM-dd HH:mm:ss:SSS Z']'","logFile":"System.err","configurationFile":"simplelogger.properties","showShortLogName":false,"showDateTime":true,"showLogName":true,"showThreadName":true,"defaultLogLevel":"INFO","warnLevelString":"WARN","embedException":false}}
START RequestId: XXXX Version: $LATEST
{"m":"aws.lambda.enhanced.invocations","v":1.0,"t":["memorysize:1024","account_id:XXXX","resource:Java-integration-test-dev-helloApiGatewayV2_Java11","functionname:Java-integration-test-dev-helloApiGatewayV2_Java11","runtime:java11.0.9.1","region:sa-east-1","datadog_lambda:0.2.2","cold_start:true"],"e":1616181766}
2021-03-19 19:22:47 <97ecf32b-58e7-4420-9f0c-c597bdfab6ae> INFO  com.serverless.Handler:19 - received: 
END RequestId: XXXX
REPORT RequestId: XXXX	Duration: XXXX ms	Billed Duration: XXXX ms	Memory Size: 1024 MB	Max Memory Used: XXXX MB	Init Duration: XXXX ms	
{"traces":[[{"service":"aws.lambda","name":"aws.lambda","resource":"Java-integration-test-dev-helloApiGatewayV2_Java11","trace_id":"1a9cd3b9e1572bec","span_id":"4439c1775ea1e20e","parent_id":"0","start":1616181767100337817,"duration":23569091,"error":0,"metrics":{"_dd.agent_psr":1.0},"meta":{"function_arn":"arn:aws:lambda:sa-east-1:601427279990:function:java-integration-test-dev-helloapigatewayv2_java11","runtime-id":"f1b14429-6c97-4704-a0b8-8a255d05dd22","language":"jvm","thread.name":"main","request_id":"97ecf32b-58e7-4420-9f0c-c597bdfab6ae","datadog_lambda":"0.2.2","thread.id":"1","cold_start":"true","resource_names":"Java-integration-test-dev-helloApiGatewayV2_Java11","function_version":"$LATEST"}}]]}START RequestId: XXXX Version: $LATEST
{"m":"aws.lambda.enhanced.invocations","v":1.0,"t":["memorysize:1024","account_id:XXXX","resource:Java-integration-test-dev-helloApiGatewayV2_Java11","functionname:Java-integration-test-dev-helloApiGatewayV2_Java11","runtime:java11.0.9.1","region:sa-east-1","datadog_lambda:0.2.2","cold_start:false"],"e":1616181769}
java.lang.NullPointerException: java.lang.NullPointerException
java.lang.NullPointerException
	at io.opentracing.propagation.TextMapExtractAdapter.iterator(TextMapExtractAdapter.java:38)
	at datadog.trace.bootstrap.instrumentation.api.ContextVisitors$EntrySetContextVisitor.forEachKey(ContextVisitors.java:55)
	at datadog.trace.bootstrap.instrumentation.api.ContextVisitors$EntrySetContextVisitor.forEachKey(ContextVisitors.java:49)
	at datadog.trace.agent.core.propagation.TagContextExtractor.extract(TagContextExtractor.java:27)
	at datadog.trace.agent.core.propagation.HttpCodec$CompoundExtractor.extract(HttpCodec.java:97)
	at datadog.trace.agent.core.CoreTracer.extract(CoreTracer.java:405)
	at datadog.trace.instrumentation.opentracing32.OTTracer.extract(OTTracer.java:68)
	at io.opentracing.util.GlobalTracer.extract(GlobalTracer.java:204)
	at com.datadoghq.datadog_lambda_java.DDLambda.startSpan(DDLambda.java:140)
	at com.datadoghq.datadog_lambda_java.DDLambda.<init>(DDLambda.java:100)
	at com.serverless.ApiGatewayV2Handler.handleRequest(ApiGatewayV2Handler.java:18)
	at com.serverless.ApiGatewayV2Handler.handleRequest(ApiGatewayV2Handler.java:12)
END RequestId: XXXX
REPORT RequestId: XXXX	Duration: XXXX ms	Billed Duration: XXXX ms	Memory Size: 1024 MB	Max Memory Used: XXXX MB	
{"traces":[[{"service":"lambdainternal.AWSLambda","name":"http.request","resource":"POST /?/runtime/invocation/?/error","trace_id":"2218896c6c7160b0","span_id":"6f8de24f67805417","parent_id":"0","start":1616181770498050714,"duration":101826421,"type":"http","error":0,"metrics":{"_dd.agent_psr":1.0},"meta":{"http.status_code":"202","component":"http-url-connection","span.kind":"client","http.url":"http://127.0.0.1:9001/2018-06-01/runtime/invocation/72f10e44-9c7f-42b6-9422-7f45176f2d29/error","runtime-id":"f1b14429-6c97-4704-a0b8-8a255d05dd22","language":"jvm","peer.hostname":"127.0.0.1","peer.port":"9001","thread.name":"main","http.method":"POST","thread.id":"1"}}]]}START RequestId: XXXX Version: $LATEST
{"m":"aws.lambda.enhanced.invocations","v":1.0,"t":["memorysize:1024","account_id:XXXX","resource:Java-integration-test-dev-helloApiGatewayV2_Java11","functionname:Java-integration-test-dev-helloApiGatewayV2_Java11","runtime:java11.0.9.1","region:sa-east-1","datadog_lambda:0.2.2","cold_start:false"],"e":1616181772}
java.lang.NullPointerException: java.lang.NullPointerException
java.lang.NullPointerException
	at io.opentracing.propagation.TextMapExtractAdapter.iterator(TextMapExtractAdapter.java:38)
	at datadog.trace.bootstrap.instrumentation.api.ContextVisitors$EntrySetContextVisitor.forEachKey(ContextVisitors.java:55)
	at datadog.trace.bootstrap.instrumentation.api.ContextVisitors$EntrySetContextVisitor.forEachKey(ContextVisitors.java:49)
	at datadog.trace.agent.core.propagation.TagContextExtractor.extract(TagContextExtractor.java:27)
	at datadog.trace.agent.core.propagation.HttpCodec$CompoundExtractor.extract(HttpCodec.java:97)
	at datadog.trace.agent.core.CoreTracer.extract(CoreTracer.java:405)
	at datadog.trace.instrumentation.opentracing32.OTTracer.extract(OTTracer.java:68)
	at io.opentracing.util.GlobalTracer.extract(GlobalTracer.java:204)
	at com.datadoghq.datadog_lambda_java.DDLambda.startSpan(DDLambda.java:140)
	at com.datadoghq.datadog_lambda_java.DDLambda.<init>(DDLambda.java:100)
	at com.serverless.ApiGatewayV2Handler.handleRequest(ApiGatewayV2Handler.java:18)
	at com.serverless.ApiGatewayV2Handler.handleRequest(ApiGatewayV2Handler.java:12)
END RequestId: XXXX
REPORT RequestId: XXXX	Duration: XXXX ms	Billed Duration: XXXX ms	Memory Size: 1024 MB	Max Memory Used: XXXX MB	
{"traces":[[{"service":"lambdainternal.AWSLambda","name":"http.request","resource":"POST /?/runtime/invocation/?/error","trace_id":"357a5a08b50b5711","span_id":"78231746ae70f1ad","parent_id":"0","start":1616181772642036244,"duration":36470537,"type":"http","error":0,"metrics":{"_dd.agent_psr":1.0},"meta":{"http.status_code":"202","component":"http-url-connection","span.kind":"client","http.url":"http://127.0.0.1:9001/2018-06-01/runtime/invocation/ca4ffe13-9284-4f48-bcab-d0d34c7dbabd/error","runtime-id":"f1b14429-6c97-4704-a0b8-8a255d05dd22","language":"jvm","peer.hostname":"127.0.0.1","peer.port":"9001","thread.name":"main","http.method":"POST","thread.id":"1"}}]]}
